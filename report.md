V
===============

１．データ概要
--------------
ユーザー: １〜９４３（合わて９４３名）
映画: １〜１６８２（合わて１６８２作）
評価範囲: ０〜５（評価低い〜評価高い: １〜５, ０は評価なし）
映画種類: ０〜１８（合わて１９類）

データは
`Array[ユーザーID][映画ID] ＝ 評価`（転置したら`Array[映画ID][ユーザーID] ＝ 評価` にもなれる）と
`Array[映画ID][種類番号] ＝ bool値`（値１はこの種類に所属、０は所属していない）
の配列に整理できます。

`Array[ユーザーID][映画ID]` は $\textbf{R}^{943\times 1682}$ の行列になります
`Array[映画ID][種類番号]` は $\textbf{R}^{1682\times 19}$ の行列になります

ユーザーをサンプル、映画の評価は特徴量と見たら、ユーザーは1682次元のヴェクトルと扱えます
映画をサンプル、ユーザーの評価は特徴量と見たら、映画は943次元のベクトルにも扱えます


２．処理流れを
--------------
大体協調フィルタリング(CF)の思想、関係モデル：

１．k-meansでユーザーをいくつのグルプに分けて、
グルプ内映画の平均値を評価を計算しする

２．そしてその評価をユーザー自身の好みによる重みを行ける
それを最終評価になって、評価高い順から推薦する

１．k-meansアルゴリズムを使い、映画の評価を特徴量して、ユーザーをいくつのグルプに分ける
２．同じグルプの中、全て映画に対して、平均評価を求める（評価は０の時、計算に参加しない）
（例えば、ある映画に対して、a, b, c三人の評価は 1, 5, 0, なら平均評価を $(1+5)/2$ にします）
３．ユーザーの採点でユーザーは各種類の映画の好み度を計算でする
４．ユーザーは各種類の映画の好み度と映画の種重み類を合わせて、重みを計算する
５．重みとグルプ平均評価を掛けると、最終評価を得る
６．最終評価をソートして、高い評価の映画から推薦する

３．手法解説
--------------

#### ３．１　k-means
ユーザーをサンプル、映画の評価は特徴量と見なす。
よってユーザーを1682次元のベクトルと扱います。

手順：
１．ランダムでｋ個の中心点を生成する
２．各データを自分と最も近い[1]中心点に割り当てる
３．各中心点を自分に割り当てられたデータの中心に移動[3]する
そして２～３を繰り返す、データの所属がもう一度割り当てしても変わらない時、各中心点の位置は最終位置になる

まだ：
[1]．手順２と３距離の測る手法はたくさんあります。今回は（１－ピアソンの積率相関係数）[2]を距離にしました
[2]. ピアソンの積率相関係数の数値範囲は -1～1、-1は負相関、０は無関、１は相関。
１－ピアソンの積率相関係数したら、数値範囲は ０～２になります、２は負相関、１は無関、０は相関。
相関のとき距離は最も近いになります。
[3]. ピアソンの積率相関係数を使っているため、中心に移動移動するとき、評価は０（評価なし）のサンプルは平均計算に参加しない。
（例えば、ある映画に対して、a, b, c三人の評価は 1, 5, 0 なら、平均評価を $(1+5)/2$ にします）

#### ３．２　重み計算
各ユーザーに対して：
各映画に対して：
評価ｘ種類ベクトルの

$\textbf{S} = \sum^{n}_{i=0}{\textbf{V}}$

$\textbf{Real} = \dfrac{\textbf{S}}{\sum^{m}_{i=0}\textbf{S}_i}$

$\sum\textbf{Real}_i=1$


４．考察
--------------
#### ４．１　アルゴリズムによる改善点
同じグループ内、見たことない映画の平均採点を計算する --> 個人偏差が考えていない

k-means：ポイントの初期値の影響が大きい、ポイントの初期化が悪い時結果が悪い
それを改善するk-means++がありますが、距離はノルム距離（マンハッタン距離や、ユークリッド距離とか）以外の時（今回のピアソンの積率相関係数）の実装は難し

まだｋはハイパーパラメータ

#### ４．２　アプリによる改善点
１．ピアソンの積率相関係数（Pearson correlation coefficient）：まばらなデータに対応しずらい、中間値を求め辛い

２．実際ユーザーとアイテムの関係をぜんぜん考えていません

参考資料
-----------------
1. [Winning the Netflix Prize: A Summary](http://blog.echen.me/2011/10/24/winning-the-netflix-prize-a-summary/)
2. [Introduction to behavior based recommendation system](https://www.slideshare.net/hamukazu/introduction-to-behavior-based-recommendation-system)
3. *programming collective intelligence* -- book
